!function(){function e(){var e=document.getElementById("contactbox__email");e.type="email",e.className="form-input"}function t(e,t){for(var n in e)if(t.hasOwnProperty(n))if("object"==typeof e[n]&&null!==e[n])for(subprop in e[n])t[n].hasOwnProperty(subprop)&&(e[n][subprop]=t[n][subprop]);else e[n]=t[n];return e}function n(){var e;e=document.createDocumentFragment(),this.box=document.createElement("div"),this.box.className="contactbox downsized "+this.options.position,this.button=document.createElement("div"),this.button.className="contactbox__button",this.box.appendChild(this.button),this.link=document.createElement("a"),this.link.title=this.options.language.title,this.link.href="#",this.link.id="contactbox__button-link",this.button.appendChild(this.link);var t=document.createElement("span");t.innerHTML=this.options.language.title,t.className="contactbox__button-title",this.link.appendChild(t);var n=document.createElement("span");n.innerHTML='<i class="icon-comment"></i>',n.className="contactbox__button-icon",this.link.appendChild(n),this.content=document.createElement("div"),this.content.className="contactbox__content",this.box.appendChild(this.content),this.header=document.createElement("div"),this.header.className="contactbox__header",this.content.appendChild(this.header);var o=document.createElement("div");o.className="contactbox__header-title",o.innerHTML=this.options.language.title,this.header.appendChild(o),this.cross=document.createElement("a"),this.cross.id="contactbox__header-cross",this.cross.href="#",this.cross.innerHTML='<icon class="icon-cross"></i>',this.header.appendChild(this.cross),this.form=document.createElement("form"),this.form.method="post",this.form.action=this.options.endpoint,this.form.className="contactbox__form";var a=document.createElement("input");a.className="form-input",a.placeholder=this.options.language.emailPlaceholder,a.name="email",a.id="contactbox__email",null!==this.options.email?(a.type="hidden",a.value=this.options.email):a.type="email";var i=document.createElement("textarea");i.className="form-input",i.placeholder=this.options.language.messagePlaceholder,i.rows="7",i.name="message",i.id="contactbox__message";var s=document.createElement("input");s.type="submit",s.value=this.options.language.buttonText;var l=document.createElement("div");l.className="contactbox__error-msg";var c=document.createElement("div");c.className="contactbox__error-msg";var r=document.createElement("div");r.id="contactbox__success-msg",this.form.appendChild(a),this.form.appendChild(l),this.form.appendChild(i),this.form.appendChild(c),this.form.appendChild(r),this.form.appendChild(s),this.content.appendChild(this.form),e.appendChild(this.box),document.body.appendChild(e)}function o(e){for(var t=document.getElementsByClassName(e),n=0;n<t.length;n++)"DIV"==t[n].tagName?t[n].innerHTML="":t[n].value=""}this.ContactBox=function(){this.box=null,this.button=null,this.link=null,this.content=null,this.header=null,this.cross=null,this.form=null;var e={endpoint:"submit.php",position:"right",email:null,token:{name:null,value:null},language:{title:"Send us a message",emailPlaceholder:"Your email",messagePlaceholder:"Your message",emptyEmail:"Please enter your email",emptyMessage:"Please enter your message",invalidEmail:"Please enter a valid email",successMsg:"Thanks, your message has been sent!",buttonText:"Send your message"}};arguments[0]&&"object"==typeof arguments[0]&&(this.options=t(e,arguments[0])),this.generate()},ContactBox.prototype.generate=function(){var e=this;n.call(this),this.link.addEventListener("click",function(t){t.preventDefault(),e.content.classList.toggle("active"),e.box.classList.toggle("downsized")}),this.cross.addEventListener("click",function(t){t.preventDefault(),e.content.classList.toggle("active"),e.box.classList.toggle("downsized")}),this.form.addEventListener("submit",function(t){t.preventDefault();var n=document.getElementById("contactbox__email"),a=document.getElementById("contactbox__message");if(o("contactbox__error-msg"),0==e.validate(n,a))return!1;e.request(n.value,a.value)})},ContactBox.prototype.request=function(e,t){var n=this,a=new XMLHttpRequest;a.open("POST",this.options.endpoint),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onload=function(){200===a.status?(o("form-input"),document.getElementById("contactbox__success-msg").innerHTML=n.options.language.successMsg):alert("An error occured, please try again later")},a.send(encodeURI("email="+e+"&message="+t+"&"+n.options.token.name+"="+n.options.token.value+"&current_page="+window.location.href))},ContactBox.prototype.validate=function(t,n){var o=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return""==t.value?(t.nextSibling.innerHTML=this.options.language.emptyEmail,e(),!1):0==o.test(t.value)?(t.nextSibling.innerHTML=this.options.language.invalidEmail,e(),!1):""!=n.value||(n.nextSibling.innerHTML=this.options.language.emptyMessage,!1)}}();