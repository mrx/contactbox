!function(){function e(e,t){for(var n in e)if(t.hasOwnProperty(n))if("object"==typeof e[n])for(subprop in e[n])t[n].hasOwnProperty(subprop)&&(e[n][subprop]=t[n][subprop]);else e[n]=t[n];return e}function t(){var e;e=document.createDocumentFragment(),this.box=document.createElement("div"),this.box.className="contactbox downsized "+this.options.position,this.button=document.createElement("div"),this.button.className="contactbox__button",this.box.appendChild(this.button),this.link=document.createElement("a"),this.link.title=this.options.language.title,this.link.href="#",this.link.id="contactbox__button-link",this.button.appendChild(this.link);var t=document.createElement("span");t.innerHTML=this.options.language.title,t.className="contactbox__button-title",this.link.appendChild(t);var n=document.createElement("span");n.innerHTML='<i class="icon-comment"></i>',n.className="contactbox__button-icon",this.link.appendChild(n),this.content=document.createElement("div"),this.content.className="contactbox__content",this.box.appendChild(this.content),this.header=document.createElement("div"),this.header.className="contactbox__header",this.content.appendChild(this.header);var o=document.createElement("div");o.className="contactbox__header-title",o.innerHTML=this.options.language.title,this.header.appendChild(o),this.cross=document.createElement("a"),this.cross.id="contactbox__header-cross",this.cross.href="#",this.cross.innerHTML='<icon class="icon-cross"></i>',this.header.appendChild(this.cross),this.form=document.createElement("form"),this.form.method="post",this.form.action=this.options.endpoint,this.form.className="contactbox__form";var s=document.createElement("input");s.type="email",s.className="form-input",s.placeholder=this.options.language.emailPlaceholder,s.name="email",s.id="contactbox__email";var a=document.createElement("textarea");a.className="form-input",a.placeholder=this.options.language.messagePlaceholder,a.rows="7",a.name="message",a.id="contactbox__message";var i=document.createElement("input");i.type="submit",i.value=this.options.language.buttonText;var l=document.createElement("div");l.className="contactbox__error-msg";var c=document.createElement("div");c.className="contactbox__error-msg";var r=document.createElement("div");r.id="contactbox__success-msg",this.form.appendChild(s),this.form.appendChild(l),this.form.appendChild(a),this.form.appendChild(c),this.form.appendChild(r),this.form.appendChild(i),this.content.appendChild(this.form),e.appendChild(this.box),document.body.appendChild(e)}function n(e){for(var t=document.getElementsByClassName(e),n=0;n<t.length;n++)"DIV"==t[n].tagName?t[n].innerHTML="":t[n].value=""}this.ContactBox=function(){this.box=null,this.button=null,this.link=null,this.content=null,this.header=null,this.cross=null,this.form=null;var t={endpoint:"submit.php",position:"right",token:{name:null,value:null},language:{title:"Send us a message",emailPlaceholder:"Your email",messagePlaceholder:"Your message",emptyEmail:"Please enter your email",emptyMessage:"Please enter your message",invalidEmail:"Please enter a valid email",successMsg:"Thanks, your message has been sent!",buttonText:"Send your message"}};arguments[0]&&"object"==typeof arguments[0]&&(this.options=e(t,arguments[0])),this.generate()},ContactBox.prototype.generate=function(){var e=this;t.call(this),this.link.addEventListener("click",function(t){t.preventDefault(),e.content.classList.toggle("active"),e.box.classList.toggle("downsized")}),this.cross.addEventListener("click",function(t){t.preventDefault(),e.content.classList.toggle("active"),e.box.classList.toggle("downsized")}),this.form.addEventListener("submit",function(t){t.preventDefault();var o=document.getElementById("contactbox__email"),s=document.getElementById("contactbox__message");if(n("contactbox__error-msg"),0==e.validate(o,s))return!1;e.request(o.value,s.value)})},ContactBox.prototype.request=function(e,t){var o=this,s=new XMLHttpRequest;s.open("POST",this.options.endpoint),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onload=function(){200===s.status?(n("form-input"),document.getElementById("contactbox__success-msg").innerHTML=o.options.language.successMsg):alert("An error occured, please try again later")},s.send(encodeURI("email="+e+"&message="+t+"&"+o.options.token.name+"="+o.options.token.value))},ContactBox.prototype.validate=function(e,t){var n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return""==e.value?(e.nextSibling.innerHTML=this.options.language.emptyEmail,!1):0==n.test(e.value)?(e.nextSibling.innerHTML=this.options.language.invalidEmail,!1):""!=t.value||(t.nextSibling.innerHTML=this.options.language.emptyMessage,!1)}}();