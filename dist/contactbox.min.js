!function(){function a(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function b(){var b;b=document.createDocumentFragment(),this.box=document.createElement("div"),this.box.className="contactbox downsized";var c=document.createElement("div");c.className="contactbox__header",this.box.appendChild(c),this.link=document.createElement("a"),this.link.title=this.options.title,this.link.href="#",this.link.innerHTML=this.options.title+'<span class="chevron">&#9650;</span>',c.appendChild(this.link),this.content=document.createElement("div"),this.content.className="contactbox__content",this.box.appendChild(this.content),this.form=document.createElement("form"),this.form.method="post",this.form.action=this.options.endpoint;var d=document.createElement("input");d.type="email",d.className="form-input",d.placeholder="Your email",d.name="email";var e=document.createElement("textarea");e.className="form-input",e.placeholder="Your message",e.rows="7",e.name="message";var f=document.createElement("input");f.type="submit",f.value="Send your message";var g=document.createElement("div");g.className="error-msg";var h=document.createElement("div");h.className="error-msg";var i=document.createElement("div");i.className="success-msg",this.form.appendChild(d),this.form.appendChild(g),this.form.appendChild(e),this.form.appendChild(h),this.form.appendChild(i),this.form.appendChild(f),this.content.appendChild(this.form),b.appendChild(this.box),document.body.appendChild(b)}function c(a){for(var b=document.getElementsByClassName(a),c=0;c<b.length;c++)"DIV"==b[c].tagName?b[c].innerHTML="":b[c].value=""}this.ContactBox=function(){this.box=null,this.content=null,this.link=null,this.form=null;var b={title:"Send us a message",endpoint:"submit.php",successMsg:"Thanks, your message has been sent!"};arguments[0]&&"object"==typeof arguments[0]&&(this.options=a(b,arguments[0])),this.generate()},ContactBox.prototype.generate=function(){var a=this;b.call(this),this.link.addEventListener("click",function(b){b.preventDefault();var c=document.getElementsByClassName("chevron");"â–²"==c[0].innerHTML?c[0].innerHTML="&#9660;":c[0].innerHTML="&#9650;",a.content.classList.toggle("active"),a.box.classList.toggle("downsized")}),this.form.addEventListener("submit",function(b){b.preventDefault();var d=document.getElementsByName("email")[0],e=document.getElementsByName("message")[0];if(c("error-msg"),0==a.validate(d,e))return!1;a.request(d.value,e.value)})},ContactBox.prototype.request=function(a,b){var d=this,e=new XMLHttpRequest;e.open("POST",this.options.endpoint),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.onload=function(){200===e.status?(c("form-input"),document.getElementsByClassName("success-msg")[0].innerHTML=d.options.successMsg):alert("An error occured, please try again later")},e.send(encodeURI("email="+a+"&message="+b))},ContactBox.prototype.validate=function(a,b){var c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return""==a.value?(a.nextSibling.innerHTML="Please enter your email",!1):0==c.test(a.value)?(a.nextSibling.innerHTML="Please enter a valid email",!1):""!=b.value||(b.nextSibling.innerHTML="Please enter a message",!1)}}();