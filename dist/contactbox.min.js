!function(){function a(a,b){for(var c in a)if(b.hasOwnProperty(c))if("object"==typeof a[c])for(subprop in a[c])b[c].hasOwnProperty(subprop)&&(a[c][subprop]=b[c][subprop]);else a[c]=b[c];return a}function b(){var b;b=document.createDocumentFragment(),this.box=document.createElement("div"),this.box.className="contactbox downsized",this.button=document.createElement("div"),this.button.className="contactbox__button",this.box.appendChild(this.button),this.link=document.createElement("a"),this.link.title=this.options.language.title,this.link.href="#",this.link.id="contactbox__button-link",this.button.appendChild(this.link);var c=document.createElement("span");c.innerHTML=this.options.language.title,c.className="contactbox__button-title",this.link.appendChild(c);var d=document.createElement("span");d.innerHTML='<i class="icon-comment"></i>',d.className="contactbox__button-icon",this.link.appendChild(d),this.content=document.createElement("div"),this.content.className="contactbox__content",this.box.appendChild(this.content),this.header=document.createElement("div"),this.header.className="contactbox__header",this.content.appendChild(this.header);var e=document.createElement("div");e.className="contactbox__header-title",e.innerHTML=this.options.language.title,this.header.appendChild(e),this.cross=document.createElement("a"),this.cross.id="contactbox__header-cross",this.cross.href="#",this.cross.innerHTML='<icon class="icon-cross"></i>',this.header.appendChild(this.cross),this.form=document.createElement("form"),this.form.method="post",this.form.action=this.options.endpoint,this.form.className="contactbox__form";var f=document.createElement("input");f.type="email",f.className="form-input",f.placeholder=this.options.language.emailPlaceholder,f.name="email",f.id="contactbox__email";var g=document.createElement("textarea");g.className="form-input",g.placeholder=this.options.language.messagePlaceholder,g.rows="7",g.name="message",g.id="contactbox__message";var h=document.createElement("input");h.type="submit",h.value=this.options.language.buttonText;var i=document.createElement("div");i.className="contactbox__error-msg";var j=document.createElement("div");j.className="contactbox__error-msg";var k=document.createElement("div");k.id="contactbox__success-msg",this.form.appendChild(f),this.form.appendChild(i),this.form.appendChild(g),this.form.appendChild(j),this.form.appendChild(k),this.form.appendChild(h),this.content.appendChild(this.form),b.appendChild(this.box),document.body.appendChild(b)}function c(a){for(var b=document.getElementsByClassName(a),c=0;c<b.length;c++)"DIV"==b[c].tagName?b[c].innerHTML="":b[c].value=""}this.ContactBox=function(){this.box=null,this.button=null,this.link=null,this.content=null,this.header=null,this.cross=null,this.form=null;var b={endpoint:"submit.php",token:{name:null,value:null},language:{title:"Send us a message",emailPlaceholder:"Your email",messagePlaceholder:"Your message",emptyEmail:"Please enter your email",emptyMessage:"Please enter your message",invalidEmail:"Please enter a valid email",successMsg:"Thanks, your message has been sent!",buttonText:"Send your message"}};arguments[0]&&"object"==typeof arguments[0]&&(this.options=a(b,arguments[0])),this.generate()},ContactBox.prototype.generate=function(){var a=this;b.call(this),this.link.addEventListener("click",function(b){b.preventDefault(),a.content.classList.toggle("active"),a.box.classList.toggle("downsized")}),this.cross.addEventListener("click",function(b){b.preventDefault(),a.content.classList.toggle("active"),a.box.classList.toggle("downsized")}),this.form.addEventListener("submit",function(b){b.preventDefault();var d=document.getElementById("contactbox__email"),e=document.getElementById("contactbox__message");if(c("contactbox__error-msg"),0==a.validate(d,e))return!1;a.request(d.value,e.value)})},ContactBox.prototype.request=function(a,b){var d=this,e=new XMLHttpRequest;e.open("POST",this.options.endpoint),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.onload=function(){200===e.status?(c("form-input"),document.getElementById("contactbox__success-msg").innerHTML=d.options.language.successMsg):alert("An error occured, please try again later")},e.send(encodeURI("email="+a+"&message="+b+"&"+d.options.token.name+"="+d.options.token.value))},ContactBox.prototype.validate=function(a,b){var c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return""==a.value?(a.nextSibling.innerHTML=this.options.language.emptyEmail,!1):0==c.test(a.value)?(a.nextSibling.innerHTML=this.options.language.invalidEmail,!1):""!=b.value||(b.nextSibling.innerHTML=this.options.language.emptyMessage,!1)}}();